\section{Discussion}
\todo{Write a discussion}
\todo{metion annomelies and resons}

\subsection{The Autumn discrepancy}\label{sec:autumn}

A phenomenon that arose during performance evaluations was that the linear models struggles with the Autumn season. The difference graphs showed a clear over or under estimation that are larger than $10\sigma$. When investigating the coeffisents to the model \todo{Show table of parameters} this discrepancy can be contributed to the intercept that during low temperature ($<5^\circ C$) giving either an over estimation or an under approximation. Further more when removing the calculation of the intersept the same phenomenon is still precent possibility due to the adaptation to Summer season.

If one looks at the deep learning models shown at figure \ref{fig:diffplotl1kerasbilstmstats10innlandet2022tjm10} to figure \ref{fig:diffplotl2kerasbilstmstats10innlandet2022tjm10} this effect can be observed. The GRU model is affected similarly, but to a lesser exstent where it overestimates at a few periods during the Mars month. This can be due to snow covering the soil forming an thermal isolator keeping the soil temperature constant while the air temperature is fluxiating at relative normal rates giving the models a false sense of generality when predicting this period, however the GRU model seems to interoperate a sense of season awareness allowing it to have a more constant temperature prediction in the autumn and return to "normal" operation during Summer and Spring. 

\subsubsection{Temperature seasons}

It can be observed in the raw data and in the diff plots (see figure \ref{fig:diffplotl1kerasbilstmstats10innlandet2022tjm10} as an example) that the seasons can be shown though the temperatures and stable periods. The flat areas is explained by snow covers that creates an thermal isolation layer that dampens the effekt of the air temperature. There excist models in the literature that takes this effect into account\cite{rankinen_simple_2004,stuurop_simulating_2021} to make a more accurate prediction of soil temperature when there is snow present or frozen soil.

\subsection{Plauborg}

The result of the modelling (table \ref{tab:Plauborg:day:20} to \ref{tab:linreg:10}) show that modelig soil temperature without the inclusion of time is an inefficient, and inaccurate method of predicting soil temperatures.

In this study the original model, that was trained for daily values was converted to predict hourly data to see if the same formulation could be used to make predictions. When comparing the results shown in table \ref{tab:Plauborg:hour:10} and table \ref{tab:Plauborg:hour:20} to their daily counterpart it shows similar values showing that the model proposed in \citeauthor{plauborg_simple_2002} can be extended to hourliy timeseries.

\subsection{Discussion of good results of Plauborg}

The inclusion of previous temperatures gives an improved estimation, even on hourly basis. The coefficents for both daily and hourly are observed to be <1 making it a mean temperature and the fourier terms would estimate the soil function\eqref{eq:soil_equation}\cite{holmes_estimating_2008}.

\begin{equation}
E_{\text{soil,year}}(T) + e^{-z/D}\sin(\omega t - z/D + \phi)\label{eq:soil_equation}
\end{equation}

Since the term $exp(z/D)$ is constant we would be estimating $\sin(\omega t - Q) = \sin(\omega t)\cos(Q) - \sin(Q)\cos(\omega t)$, where Q is $z/D - \phi$ and is considered constant. This will be extrapolated to a simple sum of sines and cosines as the model does. Together the Plauborg model would estimate the approximation \eqref{eq:plauborg_expand}. The extra terms are nessesery to include external factors that affects the temperature (rain, soil type, atmosphere, etc). 

\begin{align}
E_{\text{soil,year}}(T) + e^{-z/D}\sin(\omega t - z/D + \phi) \\
\approx E_{\text{air,period}}(T) + \sum \alpha_ie^{z/D}\sin(-Q_i)\cos(i\omega t_i) + \sum \beta_je^{z/D}\cos(-Q_j)\sin(i\omega t_j)\label{eq:plauborg_expand}
\end{align}

The differences between actual and predicted values could be due to the varying soil types at different stations. To create a more accurate model, one might need to consider additional weather-related measurements (such as air pressure, humidity, soil type, and texture) or incorporate non-linear features (such as the square root of temperature or the temperature change ratio over time)
 

\subsection{Linear regression vs Plauborg}\todo{review mot tidlige i diskusjonen}

The global measure for the linear regression has an average error of $2.3^\circ C \pm 4.23^\circ C$ while the global messure of the Plauborg daily model has an average error of $0.6^\circ C \pm 1.96^\circ C$. Further more Plauborg has an hight $R^2$ value indicating that it follows the temperature changes in the soil better than just scaling the air temperature by a scaling factor.

The linear model shows subpar predictive capabilities compared to Plauborg's model who uses the same technics but interoperate time dependence. 

\subsection{Modification of Plauborg}

The Plauborg model trained in Norway was found to only need 3 days ($t_0,t_{-1},t_{-2}$) compared to \cite{plauborg_simple_2002} that needed 4 days ($t_0,t_{-1},t_{-2},t_{-3}$). However for the Fourier terms both models (Danish model and the Norwegian model) required 2 sine and cosine terms. For the 20cm target the models diverge in the sense of quantity of terms. It was found that the 20cm model needs 14 sine terms and 2 cosine terms, however only needs 2 days.
\begin{figure}[H]
	\begin{subfigure}{\textwidth}
		\centering
		\includegraphics[width=0.8\linewidth]{../../results/plots/diffplot_Plauborg_day_stat_10_Innlandet_2022_TJM10}
		\caption[Plauborg daily TJM10]{The daily model of Plauborg model. The model uses daily avergae tempratures to predict soil temperatures.}
		\label{fig:diffplotplauborgdaystat10innlandet2022tjm10}
	\end{subfigure}
	\begin{subfigure}{\textwidth}
		\centering
		\includegraphics[width=0.8\linewidth]{../../results/plots/diffplot_Plauborg_stat_10_Innlandet_2022_TJM10}
		\caption[Plauborg hourly TJM10]{The hourly model of Plauborg model. The model uses hourly temperature data.}
		\label{fig:diffplotplauborgstat10innlandet2022tjm10}
	\end{subfigure}
	\caption{Comperasion of daily versus hourly predictions}
\end{figure}

The modification to Plauborg's model is minor, by replacing the $\omega$ with a larger coefficient it can be used with hourly data. As seen in figure \ref{fig:diffplotplauborgstat10innlandet2022tjm10} the variation is stronger than \ref{fig:diffplotplauborgdaystat10innlandet2022tjm10} however the overall performance is comparable as seen in table \ref{tab:Plauborg:day:10} and table \ref{tab:Plauborg:hour:10}. 

\begin{table}[t]
	\centering
	\resizebox{\textwidth}{!}{
		\input{tables/table_Plauborg_stat_10.tex}
	}
	\caption{Hourly Plauborg model results.}
	\label{tab:plauborg_hour_res}
\end{table}

\begin{table}[t]
	\centering
	\resizebox{\textwidth}{!}{
		\input{tables/table_Plauborg_day_stat_10.tex}
	}
	\caption{Daily Plauborg model results.}
	\label{tab:plauborg_day_res}
\end{table}

With modification to the model to accept hourly data it still preforms approximately as well as the daily data version. With a average error of $0.597^\circ C \pm 2.529^\circ C$ for TJM10 and $0.528^\circ C \pm 2.676^\circ C$ for TJM20. It was found that the modified Plauborg model only needs 2 sine terms to make a good prediction and 12h of air temperature which would translate to half a day instead of 3 days.
 
\subsubsection{RNN results compared to other studies}
 
The BiLSTM is an improvement over LSTM and the modified BiLSTM with layers is a clear indication that added complexity to a deep learning model is the way to go for . This progression of improvements has been shown in other studies\cite{feng_estimation_2019,citakoglu_comparison_2017,li_attention-aware_2022,li_gans-lstm_2020,wang_modeling_2022}. None of the deep learning models has been optimised, however in according to earlier studies that focused on these types of model the authors did find that adding layers to the models does improve the model performance. 

\subsection{Model comparison}

There is a unmistakeably distinction between the linear regression and the other models. The basic linear regression model 

\subsection{Future work}

The models chosen in this study is not a representative sample of current knowledge of soil temperature modelling, and this study did not aim for optimizing the models beyond what the original authors have already done with the exception for base models used for comparison purposes. A more comprehensive is needed of more complex models that utilises cutting edge technologies, techniques, and theory. One of which is logic based models, for instance ASPER\cite{le_asper_2023} that tries to incorporate logical descriptions of the problem and limits the model for better or equal results based on fewer samples\cite{machot_bridging_2023}. Another approach is to use the newest deep learning method of the attention mechanism\cite{vaswani_attention_2017} combined with recurrent neural networks to elevate the accuracy and speed of the model. As the author of the paper \cite{li_attention-aware_2022} has show great promise with that approach.

Furthermore, the models presented in this study are not optimised as far as they can as there are more parameters one can include in the model, and \gls{gl:hype_param} one can fine tune to improve the predictive capability of the models such as
\begin{itemize}
	\item The type of loss function
	\item the learning rate
	\item the optimizer
	\item the activation function used
	\item weight regulation
	\item adding a dropout rate
\end{itemize}
This are a small collection of techniques that can be utilised to furter optimize the models for better predictive performance. 

There have been significant developments in model types, including \acrfull{ac:asper}. ASPER combines logical statements\footnote{Statements can be thought of as formulas, natural laws, or knowledge about the solution} with deep learning models to achieve results comparable to or better than "non-logical" deep learning models, but with fewer samples \cite{le_asper_2023}. A study demonstrated that the ASPER model can reduce the required number of samples/observations by a factor of 1/1000 \cite{machot_bridging_2023} and studies that uses this knowledge based approach shows to improve the predictive ability of the model to predict soil temperatures\cite{abimbola_knowledge-guided_2021,alizamir_advanced_2020}. In an interview with the study researcher \cite{fadi_al_machot_discussion_2024}, it was found that while the model requires strict rules, it is possible to incorporate Bayesian statistics to enhance its generality for various applications. By relaxing the ruleset and acknowledging that the given rules may not be 100\% accurate, the model can be adapted to other applications using approximation rule-sets. Its the belife of the author of current study that this model can be adapted to soil temperature prediction when incorporating Bayesian statistics.

Additionally, attention-awareness, a method developed by the Google cooperation \cite{vaswani_attention_2017} also used in ChatGPT and other modern AI technologies, has been employed to predict soil temperatures and soil moisture\cite{li_attention-aware_2022} and has shown promising results in predicting soil temperatures by dynamically putting emphases on some of the features, particular days, and combinations of these when predicting. 