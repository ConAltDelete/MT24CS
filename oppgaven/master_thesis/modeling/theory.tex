\section{Previous works}\label{sec:theory}

This section discusses the theory behind the models used in the 

\subsection{Linear regression}

The regression model will be for the sake of convenience be expressed as the following expression
$$
\left(\vec{F}\circ \mathbf{A}\right)\vec{\beta}=\vec{y}+\vec{\varepsilon}
$$

Where $\vec{F}$ is a vector function with following domain $\vec{F}:\mathbb{R}^{m\times n}\to \mathbb{R}^{m\times p}$ where $m,p\in \mathbb{N}$, $\mathbf{A}$ is the data in matrix form with dimensions $\mathbb{R}^{m\times n}$, $\vec{\beta}$ is the regression terms, $\vec{y}$ is the target (TJM), and $\vec{\varepsilon}$ is the error from modelling. The $\circ$ operator is the composition of $\vec{F}$ and $\mathbf{A}$, is a short way of writing $\vec{F}(\mathbf{A})$.

This basic model to express the linearity of the compoents to soil temperature. This will function as the base model for regression models. 
\subsection[Plauborg Regression]{Plauborg linear regression model with Fourier terms}\cite{plauborg_simple_2002}

Making a linear regression model for soil temperature sensitive to time without introducing more computational heavy operation would be to introduce features that reflect time. In the paper \citetitle{plauborg_simple_2002} the author chose to extend the features from air temperature to include also day of year and the air temperature from those days. This means the following F function that \citeauthor{plauborg_simple_2002} used would be 
$$
\vec{F} := [air_t \; air_{t-1}\; air_{t-2}\; air_{t-3}\; \sin(\omega t) \; \cos(\omega t)\; \sin(2*\omega t)\; \cos(2*\omega t)]^T
$$

Where $air_t$ is the air temperature at time $t$ expressed in day of year, $\omega$ is the angular frequency to make the argument of sine and cosine expressed in radians. The sine/cosine elements in the F function represent the variations through the day by fitting $\vec{\beta}$ to the yearly variation. To adapt the authors model to an hourly time unit would be to either
\begin{enumerate}
	\item Extend the F function to include a larger $\omega$ coefficient to reflect hourly oscillations in conjunction with daily fluxiations
	\item Refit the Fourier terms with a larger $\omega$ coefficient to make the oscillations more representative of daily temperature changes.
\end{enumerate}

The larger coefficient could be expressed as $2\pi/24$ while the smaller $\omega$ for daily values would be rescaled to $2\pi/8760$.

The problem with this approsh would be Fouriers Sine-Cosine series approximation which would suggest that \citeauthor{plauborg_simple_2002}'s method could be subject to overfitting but addition of more terms. On the other hand it gives us a way to compute the coefficients $\alpha_i$ and $\gamma_i$ for sine and cosine terms respectively, though it would be more numerically stable with a pseudo-inverse computation or a max log likelihood approach. \alert{Need to compute condition number of solutions.}

\subsection[Rankin algorithm]{Rankin's finite difference method of simplified heat flow in snow cowered soil}

A more direct method based on laws of physics develop by \citeauthor{karvonen_model_1988} involves forming a Finite Difference Method (FDM) around point of interest with simplifications to the equations described in \citetitle{karvonen_model_1988}. A team of reasearchers collaborating with the original author found an algorithm by making simplifications to the general differential equations forming a iterative 2-step prosedure.
\begin{algorithm}
	\begin{algorithmic}
		\Require $D,f_d$
		\Ensure $T_Z^0$ is defined.
		\State $\alpha_t$ \gets $\frac{\partial T / \partial t}{\partial^2 T / \partial t^2}$
		\ForEach{$t\in T$}
			\State $T_*^{t+1}$ \gets $T_Z^t + \Delta t \times \alpha_t \times (T_{air}-T_Z^t)$
			\State $T_Z^{t+1}$ \gets $T_*^{t+1}*e^{-f_d\times D}$
		\EndForEach
	\end{algorithmic}
	\caption{Rankin algorithm}
\end{algorithm}
\subsection{Long Short Term Memory model}

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.7\linewidth]{figures/LSTM_Cell}
	\caption{LSTM cell  Artist: \textcite{chevalier_english_2018}}
	\label{fig:lstmcell}
\end{figure}

\subsection[ILSTM]{Attention aware LSTM model}\cite{li_attention-aware_2022}

